
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://oakvar.com/devguide_modules/">
      
      
        <link rel="prev" href="../ai_ml/">
      
      
        <link rel="next" href="../devguide_workflows/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.22">
    
    
      
        <title>Modules - OakVar</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.732c4fb1.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#anatomy-of-a-module" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="OakVar" class="md-header__button md-logo" aria-label="OakVar" data-md-component="logo">
      
  <img src="../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OakVar
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Modules
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="OakVar" class="md-nav__button md-logo" aria-label="OakVar" data-md-component="logo">
      
  <img src="../images/logo.png" alt="logo">

    </a>
    OakVar
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Install
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Install
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../install_system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../install_modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modules
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Command-line interface
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Command-line interface
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../conf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conf file
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../filter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Filtering
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../gui/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Graphical user interface
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Integration with AI/ML
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Integration with AI/ML
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../scikit_learn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    scikit-learn
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ai_ml/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developer guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Developer guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Modules
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Modules
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#anatomy-of-a-module" class="md-nav__link">
    <span class="md-ellipsis">
      Anatomy of a module
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Anatomy of a module">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reporter" class="md-nav__link">
    <span class="md-ellipsis">
      Reporter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotator" class="md-nav__link">
    <span class="md-ellipsis">
      Annotator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapper" class="md-nav__link">
    <span class="md-ellipsis">
      Mapper
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#converter" class="md-nav__link">
    <span class="md-ellipsis">
      Converter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postaggregator" class="md-nav__link">
    <span class="md-ellipsis">
      Postaggregator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependency-control" class="md-nav__link">
    <span class="md-ellipsis">
      Dependency control
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dependency control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#module-dependency" class="md-nav__link">
    <span class="md-ellipsis">
      Module dependency
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pypi-dependency" class="md-nav__link">
    <span class="md-ellipsis">
      PyPI dependency
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#template-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Template generation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-options" class="md-nav__link">
    <span class="md-ellipsis">
      Module options
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../devguide_workflows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Workflows
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../devguide_debugging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debugging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../register/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Publishing your module
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../api/main/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Python API
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9" id="__nav_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Python API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../api/oakvar_api/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    oakvar.api
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9_1" id="__nav_9_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_1">
            <span class="md-nav__icon md-icon"></span>
            oakvar.api
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/module/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/new/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    new
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../api/store/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    store
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9_1_4" id="__nav_9_1_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_1_4">
            <span class="md-nav__icon md-icon"></span>
            store
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/store_account/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    account
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    system
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/lib_util_util/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    oakvar.lib.util.util
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../apache_spark/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Apache Spark
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../technical/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Technical Details
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../vcf2vcf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VCF2VCF
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/rkimoakbioinformatics/oakvar/releases" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release notes &#128279
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/rkimoakbioinformatics/oakvar" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Repository &#128279
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/rkimoakbioinformatics/oakvar/blob/master/LICENSE" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License &#128279
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/sponsors/rkimoakbioinformatics" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sponsor &#128279
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../third_party/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Third party
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#anatomy-of-a-module" class="md-nav__link">
    <span class="md-ellipsis">
      Anatomy of a module
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Anatomy of a module">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reporter" class="md-nav__link">
    <span class="md-ellipsis">
      Reporter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotator" class="md-nav__link">
    <span class="md-ellipsis">
      Annotator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mapper" class="md-nav__link">
    <span class="md-ellipsis">
      Mapper
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#converter" class="md-nav__link">
    <span class="md-ellipsis">
      Converter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postaggregator" class="md-nav__link">
    <span class="md-ellipsis">
      Postaggregator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependency-control" class="md-nav__link">
    <span class="md-ellipsis">
      Dependency control
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dependency control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#module-dependency" class="md-nav__link">
    <span class="md-ellipsis">
      Module dependency
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pypi-dependency" class="md-nav__link">
    <span class="md-ellipsis">
      PyPI dependency
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#template-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Template generation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-options" class="md-nav__link">
    <span class="md-ellipsis">
      Module options
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Modules</h1>

<p>OakVar's functionalities are mostly performed by Python modules. OakVar orchestrates their execution as well as their management.</p>
<p>To understand OakVar's modules, let's first see which modules are already installed in the system.</p>
<pre><code>ov module ls
</code></pre>
<p>This will show a list of modules installed in the system. These modules are stored under OakVar <em>modules directory</em>, which can be found with </p>
<pre><code>ov system md
</code></pre>
<p>Inside the <em>modules directory</em>, there are subdirectories such as the following.</p>
<pre><code>annotators
commons
converters
mappers
postaggregators
reporters
webapps
webviewerwidgets
</code></pre>
<p>Each subdirectory represents a <em>type</em> of OakVar module. Inside each type subdirectory, another level of subdirectories exist for the modules of the type directory. For example, in <code>reporter</code> module type directory, the following subdirectories may exist, which correspond to the reporter modules in the system.</p>
<pre><code>csvreporter
excelreporter
stdoutreporter
textreporter
tsvreporter
vcfreporter
</code></pre>
<h3 id="anatomy-of-a-module">Anatomy of a module</h3>
<p>Details of a specific module can be shown with <code>ov module info</code>. Let's take a look at the information of <code>stdoutreporter</code> module.</p>
<pre><code>ov module info stdoutreporter
</code></pre>
<p>In the output, the directory where the module is installed can be found in <code>location</code> field. In the directory of <code>stdoutreporter</code>, the following three files will exist.</p>
<pre><code>stdoutreporter.md
stdoutreporter.py
stdoutreporter.yml
</code></pre>
<p>Among these files, <code>.py</code> and <code>.yml</code> files are the two essential files of any OakVar module. <code>.py</code> file is a Python module file which handles the operation of the module. <code>.yml</code> file is a YAML format file which has the information and the configuration of the module. <code>.md</code> file is a markdown format file which will be displayed on the OakVar web store.</p>
<h4 id="reporter">Reporter</h4>
<p>Let's take a look at each of these files. Below is the essential parts of <code>stdoutreporter.yml</code>.</p>
<pre><code>title: Standard Output Reporter
version: 1.2.0
type: reporter
</code></pre>
<p>OakVar uses this information to manage modules. </p>
<p>Below is <code>stdoutreporter.py</code>.</p>
<pre><code>from oakvar import BaseReport

class Reporter(BaseReport):

    def setup (self):
        if self.args:
            self.levels_to_write = self.args.get("level")
        if not self.levels_to_write:
            self.levels_to_write = ['variant']

    def write_preface (self, level):
        self.level = level

    def write_header (self, level):
        line = '#'+'\t'.join([col['col_name'] for \
            col in self.extracted_cols[level]])
        print(line)

    def write_table_row (self, row):
        print('\t'.join([str(v) if v != None else '' \
            for v in list(row)]))
</code></pre>
<p><code>stdoutreporter.py</code> does not have all the codes to filter and fetch annotated variants from an OakVar annotation database file. OakVar connects to <code>stdoutreporter.py</code> and calls functions <code>setup</code>, <code>write_preface</code>, <code>write_header</code>, and <code>write_table_row</code>. By defining these functions, different reporter modules can be made. More on these functions are explained in <em>Workflow</em> section.</p>
<h4 id="annotator">Annotator</h4>
<p>Check out a guide on interactive annotation module development <a href="https://medium.com/@ryanggukkim/interactively-make-variant-annotation-modules-with-oakvar-7719e2c8bf49">here</a>.</p>
<p>Watch a webinar on making OakVar annotation modules <a href="https://www.youtube.com/watch?v=9fIxez6s7Ag">here</a>.</p>
<p>The essential function for <em>annotator</em> modules is <code>annotator</code>. Below is <code>target.py</code> of <code>target</code> annotation module.</p>
<pre><code>from oakvar import BaseAnnotator
import sqlite3

class Annotator(BaseAnnotator):

    def annotate(self, input_data):
        self.cursor.execute('select rationale, agents_therapy ' +
            'from target where gene="%s";'%input_data['hugo'])
        row = self.cursor.fetchone()
        if row:
            out = {'rationale': row[0], 'therapy': row[1]}
        else:
            out = None
        return out
</code></pre>
<p><code>annotate</code> function receives <code>input_data</code> which is a <code>dict</code> of a variant, such as</p>
<pre><code>{"uid": 1834, 
 "chrom": "chr1", 
 "pos": 19834895, 
 "ref_base": "A", 
 "alt_base": "G"}
</code></pre>
<p>If you add <code>input_format: crx</code> to your module's yml file, <code>input_data</code> will have additional information pulled from .crx file, such as</p>
<pre><code>{"uid": 1834, 
 "chrom": "chr1", 
 "pos": 19834895, 
 "ref_base": "A", 
 "alt_base": "G",
 "hugo": "GeneA",
 "transcript": "ENST0000038472",
 "so": "missense_variant",
 ...}
</code></pre>
<p>OakVar will feed into <code>annotate</code> of an annotator module with variants of the input file, one by one, and excepts a <code>dict</code> of the module's output for each given variant. In the above example, the output is a <code>dict</code> with two keys, <code>rationale</code> and <code>therapy</code>. OakVar will collect the <code>dict</code>s of input variants and feed them to the downstream steps. </p>
<p>The two keys <code>rationale</code> and <code>therapy</code> in the above example are the output columns of the module. The output columns of a module should be defined in the module's config (<code>.yml</code>) file. <code>target</code> module's config file, <code>target.yml</code>, has the following output columns definition.</p>
<pre><code>output_columns:
- name: therapy
  title: Recommended Therapy
  type: string
- name: rationale
  title: Rationale
  type: string
</code></pre>
<p><code>name</code>, <code>title</code>, and <code>type</code> are essential components of an output column, with <code>name</code> being the same as a key in the output <code>dict</code> by <code>annotate</code> function. OakVar will expect the keys defined as <code>name</code> in <code>output_columns</code> in a module's config file in the return value of <code>annotate</code> function of the module.</p>
<p>Once a module's output columns are defined in its config file and the module's <code>annotate</code> function returns a <code>dict</code> with those output columns' <code>name</code> as its keys, OakVar will do the rest to include the module's output in the annotation database and reports.</p>
<p>OakVar provides convenience variables to eahc module's <code>annotate</code> function. If a module has <code>data</code> subdirectory and if the subdirectory has an SQLite database file whose name is <code>&lt;module name&gt;.sqlite</code> (thus, in the above example, <code>target/data/target.sqlite</code>), <code>self.conn</code> and <code>self.cursor</code> are provided as an SQLite database connection and cursor objects.</p>
<h4 id="mapper">Mapper</h4>
<p>The essential function for <em>mapper</em> modules is <code>map</code>. A typical mapper modules will be structured as follows.</p>
<pre><code>...
class Mapper(BaseMapper):
    ...
    def map(self, input_data):
        ...
</code></pre>
<p>A mapper module's <code>map</code> function is similar to an annotator module's <code>annotate</code> function, in that it receives a <code>dict</code> of an input variant, which has keys such as <code>uid</code>, <code>chrom</code>, <code>pos</code>, <code>ref_base</code>, and <code>alt_base) and is expected to return an</code>dict<code>of its output. One difference is that its output</code>dict<code>is supposed to have a pre-defined set of keys. First of all, the output</code>dict<code>of</code>map<code>function should have the keys in</code>input_data`. Then, the following keys should be defined as well.</p>
<pre><code>coding
hugo
transcript
so
cchange
achange
all_mappings
</code></pre>
<p>More details will be explained here. Until then, you can take a look at <code>gencode</code> module's <code>gencode.py</code> to know more.</p>
<h4 id="converter">Converter</h4>
<p>The essential function for <em>converter</em> modules is <code>convert_line</code>. A typical converter module will be structured as follows.</p>
<pre><code>...
class Converter(BaseConverter):
    ...
    def convert_line(self, l):
        ...
</code></pre>
<p>More will be explained later.</p>
<h4 id="postaggregator">Postaggregator</h4>
<p>The essential function for <em>postaggregator</em> modules is <code>annotate</code>. A typical postaggregator module will be structured as follows.</p>
<pre><code>...
class Postaggregator(BasePostaggregator):
    ...
    def annotate(self, input_data):
        ...
</code></pre>
<p>More will be explained later.</p>
<h3 id="dependency-control">Dependency control</h3>
<h4 id="module-dependency">Module dependency</h4>
<p>An OakVar module can depend on other OakVar modules for it to properly function. Let's say module <code>annotator1</code> uses the output of <code>annotator2</code> and <code>annotator3</code> as its input. For <code>annotator1</code> to properly function, <code>annotator2</code> and <code>annotator3</code> should be already installed. This installation requirement is specified in the config file of <code>annotator1</code> (<code>annotator1.yml</code>) as the following:</p>
<pre><code>requires:
- annotator2
- annotator3
</code></pre>
<p>With this in place, when <code>annotator1</code> is installed with <code>ov module install annotator1</code>, the two dependency modules also will be installed automatically, if not already present in the system.</p>
<p>As mentioned, <code>annotator1</code> uses the output of <code>annotator2</code> and <code>annotator3</code> as its input. This dependency should be defined in <code>annotator1.yml</code> as the following.</p>
<pre><code>secondary_inputs:
  annotator2: {}
  annotator3: {}
</code></pre>
<p>With this simple definition, the output of <code>annotate2</code> and <code>annotate3</code> will be available as <code>secondary_data</code> variable to the <code>annotate</code> function of <code>annotate1</code> module. For example, </p>
<pre><code>def annotate(self, input_data, secondary_data=None):
...
</code></pre>
<p>of <code>annotate1.py</code> will have <code>secondary_data["annotate2"]</code> and <code>secondary_data["annotate3"]</code> available. If <code>annotate2.yml</code> has the following output column definition,</p>
<pre><code>output_columns:
- name: value1
  title: Value 1
  type: string
- name: value2
  title: Value 2
  type: string
</code></pre>
<p><code>annotate1</code>'s <code>annotate</code> function will be able to access those with <code>secondary_data["annotator2"]["value1"]</code> and <code>secondary_data["annotator2"]["value2"]"</code>.</p>
<p>Finer control of secondary input is possible as follows. For example, the following in <code>annotate1.yml</code></p>
<pre><code>secondary_inputs:
  annotator2:
    match_columns:
      primary: uid
      secondary: uid
    use_columns:
      - value1
</code></pre>
<p>will mean that <code>annotator2</code> output will be available as <code>secondary_data["annotator2"]</code> to the <code>annotate</code> function of <code>annotator1</code>, that for each variant, the <code>uid</code> field in the output by <code>annotator2</code> and the <code>uid</code> field in <code>input_data</code> to the <code>annotate</code> function of <code>annotator1</code> will be match to find the correct secondary_data for the variant to the function, and that only <code>value1</code> field will be available to the function.</p>
<h4 id="pypi-dependency">PyPI dependency</h4>
<p>If an OakVar module needs packages from PyPI, such requirement can be specified in the module's yml file. For example, if <code>annotator1</code>'s <code>annotator1.yml</code> has the following,</p>
<pre><code>pypi_dependencies:
- numpy
</code></pre>
<p><code>ov module install annotator1</code> will automatically perform <code>pip install numpy</code> while installing <code>annotate1</code> module.</p>
<h3 id="template-generation">Template generation</h3>
<p><code>ov new module</code> command will generate a module template folder, with template .py, .yml. and .md files for the module. The template will be in the correct folder for the module and recognized by OakVar automatically. Its usage is</p>
<pre><code>ov new module -n MODULE_NAME -t MODULE_TYPE
</code></pre>
<p>where MODULE_NAME is the name of the new module (numbers and small letters and up to one underscore between two letters) and MODULE_TYPE is the type of the new module (converter, mapper, annotator, postaggregator, and reporter).</p>
<p>Below are examples.</p>
<pre><code>ov new module -n annotator_1 -t annotator
</code></pre>
<p>will generate the template for the annotator module <code>annotator_1</code> in the folder <code>&lt;MODULES_DIR&gt;/annotators/annotator_1</code>.</p>
<pre><code>ov new module -n converter_1 -t converter
</code></pre>
<p>will generate the template for the converter module <code>converter_1</code> in the folder <code>&lt;MODULES_DIR&gt;/converters/converter_1</code>.</p>
<pre><code>ov new module -n postaggregator_1 -t postaggregator
</code></pre>
<p>will generate the template for the postaggregator module <code>postaggregator_1</code> in the folder <code>&lt;MODULES_DIR&gt;/postaggregators/postaggregator_1</code>.</p>
<h3 id="module-options">Module options</h3>
<p>Modules can receive custom options through CLI or GUI. In <code>ov run</code>, such options to modules can be given with <code>--module-options</code> option. For example,</p>
<pre><code>ov run input.vcf --module-options annotator_1.option_1=value_1
</code></pre>
<p>will send the following Python <code>dict</code> to the <code>annotator_1</code> module as <code>self.module_options</code>.</p>
<pre><code>{ "option_1": "value_1" }
</code></pre>
<p>In <code>annotator_1.py</code>, <code>self.module_options</code> will have the above <code>dict</code>.</p>
<p>Module options should be defined in the module's yml file. Thus, <code>annotator_1.yml</code> should have the following.</p>
<pre><code>module_options:
    annotator_1:
        option_1:
            title: Option 1
            type: string
            help: Option 1 help
</code></pre>
<p>Under the <code>module_options</code> key, the name of the annotator module should come. Then, the name of the option key. Then, <code>title</code>, <code>type</code>, and <code>help</code> are mandatory keys. <code>type</code> can be <code>string</code>, <code>int</code>, or <code>float</code>. With these defined, when <code>annotator_1</code> is selected on the OakVar GUI (launched by <code>ov gui</code>), an input box for <code>option_1</code> will appear under the title and will have a tooltip with the text of <code>help</code>.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5cfa9459.min.js"></script>
      
    
  </body>
</html>